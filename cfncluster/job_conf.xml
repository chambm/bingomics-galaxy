<job_conf>
    <plugins workers="4">
        <!--<plugin id="local" type="runner" load="galaxy.jobs.runners.local:LocalJobRunner" workers="2"/>-->
        <plugin id="slurm" type="runner" load="galaxy.jobs.runners.slurm:SlurmJobRunner">
            <param id="drmaa_library_path">/usr/local/lib/libdrmaa.so</param>
            <param id="invalidjobexception_state">error</param>
            <param id="invalidjobexception_retries">16</param>
            <param id="internalexception_state">error</param>
            <param id="internalexception_retries">16</param>
        </plugin>
    </plugins>
    <handlers default="handlers">
        <handler id="handler0" tags="handlers"/>
        <handler id="handler1" tags="handlers"/>
    </handlers>
     <destinations default="cluster">
        <destination id="cluster" runner="slurm">
            <param id="nativeSpecification">--time=24:00:00 --mem-per-cpu=2048 -s -n 4 -p compute</param>
            <param id="embed_metadata_in_job">False</param>
            <param id="request_cpus">4</param>
            <param id="docker_run_extra_arguments">--memory 7G</param>
            <param id="docker_memory">7G</param>
            <param id="docker_enabled">true</param>
            <!--<param id="docker_set_user">0</param>-->
            <env id="GALAXY_SLOTS">4</env>
            <env id="_JAVA_OPTIONS">-Xmx7G</env>
            <env id="LC_ALL">en_US.utf-8</env>
            <env id="LANG">en_US.utf-8</env>
            <env file="/galaxy_venv/bin/activate" />
        </destination>
        <destination id="master" runner="slurm">
            <param id="nativeSpecification">--time=4:00:00 --mem-per-cpu=1024 -n 1 -p master</param>
            <param id="embed_metadata_in_job">False</param>
            <param id="request_cpus">1</param>
            <param id="docker_enabled">true</param>
            <param id="docker_set_user">0</param>
            <env id="GALAXY_SLOTS">1</env>
            <env id="_JAVA_OPTIONS">-Xmx2G</env>
            <env id="LC_ALL">en_US.utf-8</env>
            <env id="LANG">en_US.utf-8</env>
            <env file="/galaxy_venv/bin/activate" />
        </destination>
    </destinations>
    <tools>
        <tool id="__SET_METADATA__" destination="master"/>
        <tool id="upload1" destination="master"/>
        <tool id="Filter1" destination="master"/>
        <tool id="sort1" destination="master"/>
        <tool id="xy_plot" destination="master"/>
        <tool id="scatterplot" destination="master"/>
        <tool id="suite_ggplot2" destination="master"/>
        <tool id="ggplot2_point" destination="master"/>
        <tool id="query_tabular" destination="master"/>
        <tool id="sqlite_to_tabular" destination="master"/>
        <tool id="Summary_Statistics1" destination="master"/>

        <!-- all tools go to the CfnCluster
        <tool id="myrimatch" destination="cluster"/>
        <tool id="samtools_mpileup" destination="cluster"/>
        <tool id="custom_pro_db" destination="cluster"/>
        <tool id="custom_pro_db_annotation_data_manager" destination="cluster"/>
        <tool id="bowtie2_index_builder_data_manager" destination="cluster"/>
        <tool id="psm_to_sam" destination="cluster"/>
        <tool id="tophat2" destination="cluster"/>
        <tool id="bcftools_view" destination="cluster"/>
        <tool id="idpqonvert" destination="cluster"/>
        <tool id="idpassemble" destination="cluster"/>
        <tool id="idpquery" destination="cluster"/>
        -->
    </tools>
    <limits>
    </limits>
</job_conf>
